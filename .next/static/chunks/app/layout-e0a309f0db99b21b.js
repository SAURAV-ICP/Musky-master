(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8924:function(){},5024:function(){},8938:function(e,n,t){Promise.resolve().then(t.bind(t,8595))},8595:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return d}});var r=t(3827),o=t(9646),s=t.n(o);t(3385);var i=t(6790),a=t(1116);let l="".concat(window.location.protocol,"//").concat(window.location.host,"/tonconnect-manifest.json");function c(e){let{children:n}=e,t="".concat(window.location.protocol,"//").concat(window.location.host);return(0,r.jsx)(a.LD,{manifestUrl:l,actionsConfiguration:{twaReturnUrl:t,skipRedirectToWallet:"always"},children:n})}var u=t(963);function d(e){let{children:n}=e;return(0,r.jsxs)("html",{lang:"en",children:[(0,r.jsxs)("head",{children:[(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),(0,r.jsx)("meta",{name:"HandheldFriendly",content:"true"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"})]}),(0,r.jsx)("body",{className:"".concat(s().className," overflow-x-hidden"),children:(0,r.jsx)(c,{children:(0,r.jsxs)(i.d,{children:[n,(0,r.jsx)(u.x7,{position:"bottom-center"})]})})})]})}},6790:function(e,n,t){"use strict";t.d(n,{a:function(){return u},d:function(){return c}});var r=t(3827),o=t(4090),s=t(7212),i=t(4958);let a=(0,o.createContext)({user:null,loading:!1,error:null,mutate:async()=>{}}),l="12345";function c(e){let{children:n}=e,{data:t,error:o,isLoading:c,mutate:u}=(0,s.ZP)("user",async()=>{try{console.log("Fetching user data...");let{data:e,error:n}=await i.O.from("users").select("*").eq("user_id",l).single();if(console.log("Existing user data:",e),console.log("Fetch error:",n),n){if("PGRST116"===n.code){console.log("User not found, creating new user...");let{data:e,error:n}=await i.O.from("users").insert({user_id:l,balance:0,solana_balance:0,energy:1200,spin_energy:1200,last_spin_energy_reset:new Date().toISOString(),level:"1",is_admin:!1}).select().single();if(n)throw console.error("Error creating new user:",n),n;return console.log("New user created:",e),e}throw n}if(e&&(void 0===e.spin_energy||null===e.spin_energy||0===e.spin_energy)){console.log("Updating user with spin energy...");let{data:e,error:n}=await i.O.from("users").update({spin_energy:1200,last_spin_energy_reset:new Date().toISOString()}).eq("user_id",l).select().single();if(n)throw console.error("Error updating user:",n),n;return console.log("User updated with spin energy:",e),e}if(e.last_spin_energy_reset){let n=new Date(e.last_spin_energy_reset),t=new Date;if((t.getTime()-n.getTime())/36e5>=12){console.log("Resetting spin energy after 12 hours...");let{data:e,error:n}=await i.O.from("users").update({spin_energy:1200,last_spin_energy_reset:t.toISOString()}).eq("user_id",l).select().single();if(n)throw console.error("Error resetting energy:",n),n;return console.log("Energy reset complete:",e),e}}return e}catch(e){throw console.error("Error in user context:",e),e}});return(0,r.jsx)(a.Provider,{value:{user:t,loading:c,error:o,mutate:u},children:n})}function u(){return(0,o.useContext)(a)}},4958:function(e,n,t){"use strict";t.d(n,{O:function(){return i}});var r=t(9377);let o="https://pkaooixolhnhdyajwlgw.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrYW9vaXhvbGhuaGR5YWp3bGd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk5NDQzMDEsImV4cCI6MjA1NTUyMDMwMX0.ATOLcUZaP--eojDV0ugG0bujlOkzam0q7A6e9IIKnxY";if(!o||!s)throw Error("Missing Supabase credentials");let i=(0,r.eI)(o,s)},3385:function(){}},function(e){e.O(0,[896,965,827,971,69,744],function(){return e(e.s=8938)}),_N_E=e.O()}]);