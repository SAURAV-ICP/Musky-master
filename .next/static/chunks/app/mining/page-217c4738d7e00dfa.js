(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{6127:function(e,s,t){Promise.resolve().then(t.bind(t,1195))},1195:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(3827),i=t(4090),n=t(7372),l=t(1840),c=t(703),r=t(1348),d=t(4775),o=e=>{let{gpu:s,onClose:t,onPurchase:n,canPurchase:o,owned:x}=e,[m,h]=(0,i.useState)(!1),[p,u]=(0,i.useState)("TON");if(!s)return null;let j=async()=>{h(!1),await n(s)},b=s.miningRatePerDay/86400,g=s.miningRatePerDay/1440,f=s.miningRatePerDay/24,N=30*s.miningRatePerDay,y=150*N,w=6.5*s.price.ton,v=w/(150*s.miningRatePerDay);return(0,a.jsx)(r.M,{children:(0,a.jsx)(l.E.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:(0,a.jsx)(l.E.div,{className:"bg-primary/90 backdrop-blur-xl rounded-2xl w-full max-w-lg overflow-hidden",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:e=>e.stopPropagation(),children:m?(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold",children:["Purchase ",s.name]}),(0,a.jsx)("button",{onClick:()=>h(!1),className:"w-8 h-8 rounded-full bg-black/20 flex items-center justify-center text-white/80 hover:bg-black/40 transition-colors",children:"←"})]}),(0,a.jsx)(d.Z,{amount:s.price[p.toLowerCase()]||s.price.ton,currency:p,itemType:s.name,onSuccess:j,onCancel:()=>{h(!1)}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative h-48 bg-gradient-to-b from-accent/20 to-primary/20",children:[s.image.endsWith(".mov")?(0,a.jsx)("video",{src:s.image,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain"}):(0,a.jsx)(c.default,{src:s.image,alt:s.name,fill:!0,className:"object-contain p-4"}),(0,a.jsx)("button",{onClick:t,className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-black/20 flex items-center justify-center text-white/80 hover:bg-black/40 transition-colors",children:"✕"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:s.name}),(0,a.jsx)("p",{className:"text-accent text-lg",children:s.hashrate}),(0,a.jsxs)("p",{className:"text-sm text-white/60",children:["Duration: ",s.duration]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Owned"}),(0,a.jsxs)("p",{className:"font-bold text-lg",children:[x,"/",s.maxPurchase]})]})]}),(0,a.jsxs)("div",{className:"mb-6 bg-black/20 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Mining Performance"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Per Second"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[b.toFixed(8)," SOL"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Per Minute"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[g.toFixed(6)," SOL"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Per Hour"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[f.toFixed(4)," SOL"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Per Day"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[s.miningRatePerDay.toFixed(2)," SOL"]})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-white/10",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Total Mining (30 days)"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[N.toFixed(2)," SOL"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Estimated Value"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:["$",y.toFixed(2)," USD"]})]})]})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-white/10",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"ROI Period"}),(0,a.jsxs)("p",{className:"font-bold text-accent",children:[v.toFixed(1)," days"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"ROI Percentage"}),(0,a.jsxs)("p",{className:"font-bold text-accent",children:["+",(y/w*100-100).toFixed(0),"%"]})]})]})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Specifications"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"CUDA Cores"}),(0,a.jsx)("p",{className:"font-bold",children:s.specs.cores.toLocaleString()})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Memory"}),(0,a.jsx)("p",{className:"font-bold",children:s.specs.memory})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Power Draw"}),(0,a.jsx)("p",{className:"font-bold",children:s.specs.power})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Mining Efficiency"}),(0,a.jsx)("p",{className:"font-bold",children:s.specs.efficiency})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-white/80 text-sm leading-relaxed",children:s.description})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Payment Options"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[s.price.ton&&(0,a.jsx)(l.E.button,{className:"py-2 px-3 rounded-lg text-center ".concat("TON"===p?"bg-accent text-white":"bg-black/20 text-white/70"),whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u("TON"),children:(0,a.jsxs)("div",{className:"font-bold",children:[s.price.ton," TON"]})}),s.price.stars&&(0,a.jsx)(l.E.button,{className:"py-2 px-3 rounded-lg text-center ".concat("Stars"===p?"bg-accent text-white":"bg-black/20 text-white/70"),whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u("Stars"),children:(0,a.jsxs)("div",{className:"font-bold",children:[s.price.stars.toLocaleString()," Stars"]})}),s.price.musky&&(0,a.jsx)(l.E.button,{className:"py-2 px-3 rounded-lg text-center ".concat("MUSKY"===p?"bg-accent text-white":"bg-black/20 text-white/70"),whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u("MUSKY"),children:(0,a.jsxs)("div",{className:"font-bold",children:[s.price.musky.toLocaleString()," MUSKY"]})})]}),(0,a.jsx)(l.E.button,{className:"w-full py-3 rounded-lg font-bold ".concat(o?"bg-orange-500 hover:bg-orange-400":"bg-gray-500 cursor-not-allowed"),whileHover:o?{scale:1.02}:{},whileTap:o?{scale:.98}:{},onClick:()=>{o&&h(!0)},children:o?"Purchase with ".concat(p):"Locked"}),!o&&x<s.maxPurchase&&(0,a.jsx)("p",{className:"text-xs text-orange-400 mt-2 text-center",children:"RTX5070"===s.name?"You need to own at least one RTX4090 first":"RTX5090"===s.name?"You need to own at least one RTX5070 first":"Maximum GPU limit reached (8)"})]})]})]})})})})},x=t(6790),m=t(963);let h=[{id:1,name:"RTX4070",hashrate:"0.03 SOL/day",duration:"30 days",price:{musky:4e4,ton:5,stars:2500},specs:{cores:5888,memory:"12GB GDDR6X",power:"200W",efficiency:"0.00015 SOL/W/day"},image:"/components/assets/4070TI.jpg",description:"Entry-level mining GPU with reliable performance. Mines 0.03 SOL per day for 30 days (total 0.9 SOL).",maxPurchase:2,miningRatePerDay:.03},{id:2,name:"RTX4090",hashrate:"0.08 SOL/day",duration:"30 days",price:{musky:7e4,ton:9,stars:5e3},specs:{cores:16384,memory:"24GB GDDR6X",power:"450W",efficiency:"0.00018 SOL/W/day"},image:"/components/assets/4090ti.jpg",description:"High-performance GPU for serious miners. Mines 0.08 SOL per day for 30 days (total 2.4 SOL).",maxPurchase:2,miningRatePerDay:.08},{id:3,name:"RTX5070",hashrate:"0.25 SOL/day",duration:"30 days",price:{musky:125e3,ton:25,stars:12500},specs:{cores:7680,memory:"16GB GDDR7",power:"220W",efficiency:"0.00114 SOL/W/day"},image:"/components/assets/5070ti.jpg",description:"Next-gen mining GPU with enhanced efficiency. Mines 0.25 SOL per day for 30 days (total 7.5 SOL).",maxPurchase:2,miningRatePerDay:.25},{id:4,name:"RTX5090",hashrate:"0.5 SOL/day",duration:"30 days",price:{musky:25e4,ton:50,stars:25e3},specs:{cores:18432,memory:"32GB GDDR7",power:"500W",efficiency:"0.001 SOL/W/day"},image:"/components/assets/5090ti.mov",description:"Ultimate mining GPU for maximum returns. Mines 0.5 SOL per day for 30 days (total 15 SOL).",maxPurchase:2,miningRatePerDay:.5}];function p(){let{user:e,mutate:s}=(0,x.a)(),[t,r]=(0,i.useState)(null),[p,u]=(0,i.useState)({}),[j,b]=(0,i.useState)(0),[g,f]=(0,i.useState)(!1),[N,y]=(0,i.useState)("TON"),[w,v]=(0,i.useState)(!0),[S,P]=(0,i.useState)(0),[k,O]=(0,i.useState)(0),[L,D]=(0,i.useState)(0),[R,T]=(0,i.useState)(0),[M,U]=(0,i.useState)(Date.now()),[C,G]=(0,i.useState)(!1),[E,F]=(0,i.useState)(0),[_,X]=(0,i.useState)(Date.now()),[I,A]=(0,i.useState)(0);(0,i.useEffect)(()=>{if(e){console.log("User data in mining page:",{userId:e.user_id,isAdmin:e.is_admin,adminId:"7093793454"}),H(),G(!0===e.is_admin);let s=setInterval(()=>{H(),X(Date.now()),A(6e5)},6e5),t=setInterval(()=>{W()},1e3);return()=>{clearInterval(s),clearInterval(t)}}},[e]),(0,i.useEffect)(()=>{if(e){P(e.mining_rate||0),O(e.solana_balance||0);let s=e.mining_rate||0;D(s/86400),T(s/1440),U(Date.now()),A(6e5)}},[e]);let W=()=>{let e=Date.now(),s=(e-M)/1e3;if(S>0){O(k+L*s);let t=e-_;F(Math.min(t/6e5*100,100)),A(Math.max(0,6e5-t))}U(e)},H=async()=>{if(null==e?void 0:e.user_id)try{v(!0);let s=await fetch("/api/mining/gpus?user_id=".concat(e.user_id));if(s.ok){let e=await s.json();if(console.log("Mining data received:",e),void 0!==e.is_admin&&(G(!0===e.is_admin),console.log("Admin status updated from API:",e.is_admin)),e.gpus&&(u(e.gpus),b(e.activeCount||0)),void 0!==e.miningRate){P(e.miningRate);let s=e.miningRate;D(s/86400),T(s/1440)}void 0!==e.solanaBalance&&O(e.solanaBalance),U(Date.now()),X(Date.now()),A(6e5)}else console.error("Failed to fetch GPU data:",await s.text())}catch(e){console.error("Failed to fetch GPU data:",e)}finally{v(!1)}},Y=s=>{if(!e)return!1;if(C)return console.log("Admin user can purchase GPU"),!0;let t=p[s.name]||0;return"RTX4070"===s.name||"RTX4090"===s.name?t<s.maxPurchase&&j<8:"RTX5070"===s.name?(p.RTX4090||0)>0&&t<s.maxPurchase&&j<8:"RTX5090"===s.name&&(p.RTX5070||0)>0&&t<s.maxPurchase&&j<8},B=async e=>{if(!Y(e)){m.Am.error("Purchase previous GPUs first or max limit reached");return}r(e),f(!0)},K=async()=>{f(!1);try{await H(),await s(),m.Am.success("".concat(null==t?void 0:t.name," purchased successfully!"))}catch(e){console.error("Error updating after purchase:",e)}r(null)},Z=()=>{f(!1),r(null)},$=e=>(150*e).toFixed(2);return(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Mining Farm"}),(0,a.jsx)("p",{className:"text-white/60",children:"Mine Solana with your GPUs"})]}),C&&(0,a.jsx)("div",{className:"bg-orange-500/20 px-3 py-1 rounded-full",children:(0,a.jsx)("p",{className:"text-orange-400 text-sm font-bold",children:"Admin Mode"})})]}),(0,a.jsx)("div",{className:"bg-primary-dark p-6 rounded-xl mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Mining Rate"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Per Second:"}),(0,a.jsxs)("p",{className:"font-mono text-accent",children:[L.toFixed(8)," SOL/s"]}),(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Per Minute:"}),(0,a.jsxs)("p",{className:"font-mono text-accent",children:[R.toFixed(6)," SOL/min"]}),(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Per Day:"}),(0,a.jsxs)("p",{className:"font-mono text-accent",children:[S.toFixed(4)," SOL/day"]}),(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Estimated Monthly:"}),(0,a.jsxs)("p",{className:"font-mono text-accent",children:[(30*S).toFixed(4)," SOL/month"]})]})]}),(0,a.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Mining Progress"}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("div",{className:"h-4 bg-black/30 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-accent rounded-full",style:{width:"".concat(E,"%")}})})}),(0,a.jsxs)("p",{className:"text-xs text-white/60 mb-2",children:["Next server update in ",Math.floor(I/6e4),"m ",Math.floor(I%6e4/1e3),"s"]}),(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Your mining continues even when offline"}),(0,a.jsxs)("p",{className:"text-sm mt-2",children:[(0,a.jsx)("span",{className:"text-white/60",children:"Current Balance:"})," ",(0,a.jsxs)("span",{className:"font-bold",children:[k.toFixed(6)," SOL"]})]}),(0,a.jsxs)("p",{className:"text-xs text-white/60",children:["≈ $",$(k)," USD"]})]}),(0,a.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Your GPUs"}),(0,a.jsxs)("div",{className:"space-y-2",children:[Object.entries(p).map(e=>{let[s,t]=e;return t>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:s}),(0,a.jsxs)("span",{className:"font-bold",children:[t,"x"]})]},s)}),Object.values(p).every(e=>0===e)&&(0,a.jsx)("p",{className:"text-white/60",children:"No GPUs yet. Purchase below!"})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,a.jsx)("p",{className:"text-xs text-white/60",children:"Active GPUs:"}),(0,a.jsxs)("p",{className:"font-bold",children:[j,"/8"]}),(0,a.jsx)("p",{className:"text-xs text-white/60 mt-2",children:"Total Mining (30 days):"}),(0,a.jsxs)("p",{className:"font-bold",children:[(30*S).toFixed(4)," SOL"]}),(0,a.jsxs)("p",{className:"text-xs text-white/60",children:["≈ $",$(30*S)," USD"]})]})]})]})}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Available Mining Equipment"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(e=>(0,a.jsxs)(l.E.div,{className:"bg-primary-dark p-6 rounded-xl border-2 transition-all ".concat(p[e.name]&&p[e.name]>0?"border-accent/30 hover:border-accent":"border-white/10 opacity-70"),whileHover:{scale:1.02},onClick:()=>r(e),children:[(0,a.jsx)("div",{className:"relative h-48 mb-4",children:"RTX5090"===e.name?(0,a.jsx)("video",{src:e.image,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain"}):(0,a.jsx)(c.default,{src:e.image,alt:e.name,fill:!0,className:"object-contain"})}),(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:e.name}),(0,a.jsx)("p",{className:"text-accent",children:e.hashrate}),(0,a.jsxs)("p",{className:"text-xs text-white/60",children:["Duration: ",e.duration]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Owned"}),(0,a.jsxs)("p",{className:"font-bold",children:[p[e.name]||0,"/2"]})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-sm text-white/60",children:"Price:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[e.price.musky&&(0,a.jsxs)("span",{className:"text-xs bg-black/20 px-2 py-1 rounded",children:[e.price.musky.toLocaleString()," MUSKY"]}),(0,a.jsxs)("span",{className:"text-xs bg-black/20 px-2 py-1 rounded",children:[e.price.ton," TON"]}),(0,a.jsxs)("span",{className:"text-xs bg-black/20 px-2 py-1 rounded",children:[e.price.stars.toLocaleString()," Stars"]})]})]}),(0,a.jsx)(l.E.button,{className:"w-full py-2 rounded-lg font-bold ".concat(Y(e)?"bg-orange-500 hover:bg-orange-400":"bg-gray-500 cursor-not-allowed"),whileHover:Y(e)?{scale:1.02}:{},whileTap:Y(e)?{scale:.98}:{},onClick:s=>{s.stopPropagation(),Y(e)&&B(e)},children:Y(e)?"Purchase":"Locked"})]},e.id))}),t&&!g&&(0,a.jsx)(o,{gpu:t,onClose:()=>r(null),onPurchase:e=>B(e),canPurchase:Y(t),owned:p[t.name]||0}),t&&g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"bg-primary/90 backdrop-blur-xl rounded-2xl w-full max-w-lg overflow-hidden",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold",children:["Purchase ",t.name]}),(0,a.jsx)("button",{onClick:Z,className:"w-8 h-8 rounded-full bg-black/20 flex items-center justify-center text-white/80 hover:bg-black/40 transition-colors",children:"✕"})]}),(0,a.jsx)(d.Z,{amount:t.price[N.toLowerCase()]||t.price.ton,currency:N,itemType:t.name,onSuccess:K,onCancel:Z})]})})})]})})}}},function(e){e.O(0,[840,965,134,548,906,971,69,744],function(){return e(e.s=6127)}),_N_E=e.O()}]);