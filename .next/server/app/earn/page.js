(()=>{var e={};e.id=50,e.ids=[50],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5302:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>o});var a=t(482),i=t(9108),r=t(2563),n=t.n(r),l=t(8300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["earn",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7937)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/earn/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1342)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/sauravlamichhane/Downloads/Musky-master/src/app/earn/page.tsx"],m="/earn/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/earn/page",pathname:"/earn",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4345:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},8219:(e,s,t)=>{Promise.resolve().then(t.bind(t,6471))},5978:(e,s,t)=>{Promise.resolve().then(t.bind(t,2736))},6471:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(5344),i=t(3729),r=t(4573),n=t(8110),l=t(4212),c=t(4669),o=t(9089),d=t(9410);let m=[{id:"hero",name:"Hero Musky",description:"Become a Hero Musky and enjoy enhanced mining and energy benefits",benefits:["2x Mining rate for 3 Days","50% energy boost for 3 days","Hero Musky badge","Profile image changes to HERO.png"],prices:{ton:1,stars:500},duration:"3 days",image:"/images/hero-musky.png"},{id:"superhero",name:"Superhero Musky",description:"Upgrade to Superhero Musky for maximum benefits",benefits:["4x Mining Rate for 3 Days","100% energy boost for 3 days","Superhero Musky badge","Profile image changes to SUPERHERO.png"],prices:{ton:2,stars:1e3},duration:"3 days",image:"/images/superhero-musky.png"}],x=[{id:"RTX4070",name:"RTX 4070 Miner",description:"Start mining with the RTX 4070",benefits:["Mines 0.03 Solana Per day","Lasts for 30 Days","Total collection: 0.9 Solana","Buy 2 to unlock RTX 4090"],prices:{ton:5,stars:2500},duration:"30 days",image:"/images/rtx4070.png"},{id:"RTX4090",name:"RTX 4090 Miner",description:"Upgrade to the powerful RTX 4090",benefits:["Mines 0.08 Solana Per day","Lasts for 30 Days","Total collection: 2.4 Solana","Buy 2 to unlock RTX 5070"],prices:{ton:9,stars:5e3},duration:"30 days",image:"/images/rtx4090.png"},{id:"RTX5070",name:"RTX 5070 Miner",description:"Advanced RTX 5070 mining hardware",benefits:["Mines 0.25 Solana Per day","Lasts for 30 Days","Total collection: 7.5 Solana","Buy 2 to unlock RTX 5090"],prices:{ton:25,stars:12500},duration:"30 days",image:"/images/rtx5070.png"},{id:"RTX5090",name:"RTX 5090 Miner",description:"Ultimate RTX 5090 mining hardware",benefits:["Mines 0.5 Solana Per day","Lasts for 30 Days","Total collection: 15 Solana","Maximum 2 purchases allowed"],prices:{ton:50,stars:25e3},duration:"30 days",image:"/images/rtx5090.png"}],h=[{id:"stamina",amount:1e3,price:100},{id:"stamina",amount:5e3,price:500},{id:"stamina",amount:1e4,price:1e3}],u=()=>{let{user:e,mutate:s}=(0,l.a)(),[t,r]=(0,i.useState)("upgrade"),[c,u]=(0,i.useState)(null),[p,b]=(0,i.useState)(null),[f,w]=(0,i.useState)(!1),[y,j]=(0,i.useState)("TON"),g=e=>{u(e),w(!0)},N=e=>{b(e),w(!0)},v=async()=>{await s(),w(!1),u(null),b(null)},S=()=>{w(!1)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex space-x-4 mb-6",children:[a.jsx(n.E.button,{onClick:()=>r("upgrade"),className:`flex-1 py-3 rounded-xl font-bold ${"upgrade"===t?"bg-accent text-white":"bg-primary/20 text-white/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Upgrade Status"}),a.jsx(n.E.button,{onClick:()=>r("miner"),className:`flex-1 py-3 rounded-xl font-bold ${"miner"===t?"bg-accent text-white":"bg-primary/20 text-white/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Buy Miners"}),a.jsx(n.E.button,{onClick:()=>r("stamina"),className:`flex-1 py-3 rounded-xl font-bold ${"stamina"===t?"bg-accent text-white":"bg-primary/20 text-white/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Buy Stamina"})]}),"upgrade"===t&&!f&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(e=>(0,a.jsxs)(n.E.div,{className:"bg-primary/20 backdrop-blur-lg rounded-xl p-6 border border-white/10 hover:border-accent/50 transition-all",whileHover:{scale:1.02},initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mr-4",children:e.image?a.jsx(d.default,{src:e.image,alt:e.name,width:48,height:48}):a.jsx("span",{className:"text-2xl",children:"\uD83D\uDC51"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:e.name}),a.jsx("p",{className:"text-white/60 text-sm",children:e.duration})]})]}),a.jsx("p",{className:"text-white/80 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:"Benefits:"}),a.jsx("ul",{className:"space-y-1",children:e.benefits.map((e,s)=>(0,a.jsxs)("li",{className:"text-white/70 text-sm flex items-center",children:[a.jsx("span",{className:"text-accent mr-2",children:"✓"})," ",e]},s))})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,a.jsxs)("div",{className:"text-white",children:[a.jsx("span",{className:"text-white/60 text-sm",children:"Price: "}),(0,a.jsxs)("span",{className:"font-bold",children:[e.prices.ton," TON"]}),a.jsx("span",{className:"text-white/60 text-sm",children:" or "}),(0,a.jsxs)("span",{className:"font-bold",children:[e.prices.stars," Stars"]})]}),a.jsx(n.E.button,{onClick:()=>g(e),className:"px-4 py-2 bg-accent rounded-lg font-semibold text-white",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Purchase"})]})]},e.id))}),"miner"===t&&!f&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(e=>(0,a.jsxs)(n.E.div,{className:"bg-primary/20 backdrop-blur-lg rounded-xl p-6 border border-white/10 hover:border-accent/50 transition-all",whileHover:{scale:1.02},initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mr-4",children:e.image?a.jsx(d.default,{src:e.image,alt:e.name,width:48,height:48}):a.jsx("span",{className:"text-2xl",children:"⛏️"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:e.name}),a.jsx("p",{className:"text-white/60 text-sm",children:e.duration})]})]}),a.jsx("p",{className:"text-white/80 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:"Benefits:"}),a.jsx("ul",{className:"space-y-1",children:e.benefits.map((e,s)=>(0,a.jsxs)("li",{className:"text-white/70 text-sm flex items-center",children:[a.jsx("span",{className:"text-accent mr-2",children:"✓"})," ",e]},s))})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,a.jsxs)("div",{className:"text-white",children:[a.jsx("span",{className:"text-white/60 text-sm",children:"Price: "}),(0,a.jsxs)("span",{className:"font-bold",children:[e.prices.ton," TON"]}),a.jsx("span",{className:"text-white/60 text-sm",children:" or "}),(0,a.jsxs)("span",{className:"font-bold",children:[e.prices.stars," Stars"]})]}),a.jsx(n.E.button,{onClick:()=>g(e),className:"px-4 py-2 bg-accent rounded-lg font-semibold text-white",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Purchase"})]})]},e.id))}),"stamina"===t&&!f&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:h.map((e,s)=>(0,a.jsxs)(n.E.div,{className:"bg-primary/20 backdrop-blur-lg rounded-xl p-6 border border-white/10 hover:border-accent/50 transition-all",whileHover:{scale:1.02},initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-2",children:a.jsx("span",{className:"text-2xl",children:"⚡"})}),(0,a.jsxs)("h3",{className:"text-lg font-bold text-white",children:[e.amount," Stamina"]})]}),(0,a.jsxs)("div",{className:"text-center mb-4",children:[a.jsx("p",{className:"text-white/80",children:"Boost your lucky spin energy"}),a.jsx("p",{className:"text-white/60 text-sm",children:"Resets every 12 hours"})]}),a.jsx("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)(n.E.button,{onClick:()=>N(e),className:"px-4 py-2 bg-accent rounded-lg font-semibold text-white",whileHover:{scale:1.05},whileTap:{scale:.95},children:["Buy for ",e.price," Stars"]})})]},s))}),f&&c&&a.jsx(n.E.div,{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsxs)(n.E.div,{className:"bg-primary p-6 rounded-2xl w-full max-w-md",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Confirm Purchase"}),a.jsx("button",{onClick:S,className:"text-white/60 hover:text-white",children:"✕"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:c.name}),a.jsx("p",{className:"text-white/70",children:c.description})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-white/70",children:"Item:"}),a.jsx("span",{className:"text-white font-semibold",children:c.name})]}),(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-white/70",children:"Duration:"}),a.jsx("span",{className:"text-white font-semibold",children:c.duration})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/70",children:"Price:"}),a.jsx("span",{className:"text-white font-semibold",children:"TON"===y?`${c.prices.ton} TON`:`${c.prices.stars} Stars`})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex space-x-2 mb-4",children:[a.jsx(n.E.button,{onClick:()=>j("TON"),className:`flex-1 py-2 rounded-lg font-semibold ${"TON"===y?"bg-accent text-white":"bg-white/10 text-white/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Pay with TON"}),a.jsx(n.E.button,{onClick:()=>j("Stars"),className:`flex-1 py-2 rounded-lg font-semibold ${"Stars"===y?"bg-accent text-white":"bg-white/10 text-white/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Pay with Stars"})]}),a.jsx(o.Z,{amount:"TON"===y?c.prices.ton:c.prices.stars,currency:y,itemType:c.id,onSuccess:v,onCancel:S})]})]})}),f&&p&&a.jsx(n.E.div,{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsxs)(n.E.div,{className:"bg-primary p-6 rounded-2xl w-full max-w-md",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Confirm Purchase"}),a.jsx("button",{onClick:S,className:"text-white/60 hover:text-white",children:"✕"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-2",children:[p.amount," Stamina"]}),a.jsx("p",{className:"text-white/70",children:"Boost your lucky spin energy"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-white/70",children:"Amount:"}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:[p.amount," Stamina"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/70",children:"Price:"}),(0,a.jsxs)("span",{className:"text-white font-semibold",children:[p.price," Stars"]})]})]}),a.jsx("div",{className:"mb-4",children:a.jsx(o.Z,{amount:p.price,currency:"Stars",itemType:"stamina",onSuccess:v,onCancel:S})})]})})]})};function p(){let{user:e,mutate:s}=(0,l.a)(),[t,o]=(0,i.useState)("payments"),[d,m]=(0,i.useState)(""),[x,h]=(0,i.useState)(""),[p,b]=(0,i.useState)(e?.solana_address||""),[f,w]=(0,i.useState)(!1),[y,j]=(0,i.useState)(""),[g,N]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e?.solana_address&&j(e.solana_address)},[e?.solana_address]);let v=async()=>{if(!d||0>=parseFloat(d)){c.Am.error("Please enter a valid amount");return}w(!0);try{(await fetch("/api/stake",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e?.user_id,amount:parseFloat(d)})})).ok?(s(),m(""),c.Am.success("Successfully staked MUSKY")):c.Am.error("Failed to stake MUSKY")}catch(e){c.Am.error("Failed to stake MUSKY")}finally{w(!1)}},S=async()=>{if(!e?.solana_address){c.Am.error("Please set your Solana wallet address first");return}let t=parseFloat(x);if(isNaN(t)||t<2){c.Am.error("Minimum withdrawal is 2 SOL");return}if(t>(e?.solana_balance||0)){c.Am.error("Insufficient SOL balance");return}w(!0);try{let a=await fetch("/api/withdraw/solana",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e?.user_id,amount:t,solana_address:e.solana_address,username:e.username||"Anonymous"})});if(a.ok)s(),h(""),c.Am.success("Withdrawal request sent to admin for approval");else{let e=await a.json();c.Am.error(e.error||"Failed to submit withdrawal request")}}catch(e){console.error("Withdrawal error:",e),c.Am.error("Failed to submit withdrawal request")}finally{w(!1)}},k=async()=>{if(e?.user_id&&y){N(!0);try{if(!(await fetch("/api/user/update-solana",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.user_id,solana_address:y})})).ok)throw Error("Failed to update Solana address");await s(),c.Am.success("Solana address updated successfully")}catch(e){console.error("Error updating Solana address:",e),c.Am.error("Failed to update Solana address")}finally{N(!1)}}};return a.jsx(r.Z,{children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Earn & Withdraw"}),a.jsx("p",{className:"text-white/60",children:"Purchase items, stake MUSKY and withdraw SOL"})]}),(0,a.jsxs)("div",{className:"flex space-x-4 mb-6",children:[a.jsx(n.E.button,{onClick:()=>o("payments"),className:`flex-1 py-3 rounded-xl font-bold ${"payments"===t?"bg-accent text-white":"bg-primary/20 text-white/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Purchase"}),a.jsx(n.E.button,{onClick:()=>o("stake"),className:`flex-1 py-3 rounded-xl font-bold ${"stake"===t?"bg-accent text-white":"bg-primary/20 text-white/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Stake"}),a.jsx(n.E.button,{onClick:()=>o("withdraw"),className:`flex-1 py-3 rounded-xl font-bold ${"withdraw"===t?"bg-accent text-white":"bg-primary/20 text-white/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Withdraw"})]}),"payments"===t&&a.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:a.jsx(u,{})}),"stake"===t&&a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-primary/20 backdrop-blur-lg rounded-xl p-6 border border-white/10",children:[a.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Staking Benefits"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-accent/10 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-accent mb-2",children:"2x"}),a.jsx("div",{className:"text-white",children:"Mining Rate"})]}),(0,a.jsxs)("div",{className:"bg-accent/10 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-accent mb-2",children:"50%"}),a.jsx("div",{className:"text-white",children:"Energy Boost"})]}),(0,a.jsxs)("div",{className:"bg-accent/10 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-accent mb-2",children:"10%"}),a.jsx("div",{className:"text-white",children:"Referral Bonus"})]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-white/80",children:"Available MUSKY:"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:[e?.balance??0," MUSKY"]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm text-white/80 mb-2",children:"Amount to Stake"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"number",value:d,onChange:e=>m(e.target.value),placeholder:"Enter amount",className:"flex-1 bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white placeholder-white/40"}),a.jsx(n.E.button,{onClick:v,disabled:f,className:"px-4 py-2 bg-accent rounded-lg font-semibold text-white disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Stake"})]})]})]})]})}),"withdraw"===t&&a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-primary/20 backdrop-blur-lg rounded-xl p-6 border border-white/10",children:[a.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Withdraw SOL"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("span",{className:"text-white/80",children:"Available SOL:"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:[e?.solana_balance?.toFixed(4)??0," SOL"]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm text-white/80 mb-2",children:"Solana Wallet Address"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:y,onChange:e=>j(e.target.value),placeholder:"Enter Solana address",className:"flex-1 bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white placeholder-white/40"}),a.jsx(n.E.button,{onClick:k,disabled:g||!y,className:"px-4 py-2 bg-accent rounded-lg font-semibold text-white disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Update"})]}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Make sure to enter a valid Solana address"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm text-white/80 mb-2",children:"Amount to Withdraw"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"number",value:x,onChange:e=>h(e.target.value),placeholder:"Enter amount",className:"flex-1 bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white placeholder-white/40"}),a.jsx(n.E.button,{onClick:S,disabled:f||!e?.solana_address,className:"px-4 py-2 bg-accent rounded-lg font-semibold text-white disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Withdraw"})]}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Minimum withdrawal: 2 SOL"})]})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-white mb-2",children:"Withdrawal Information"}),(0,a.jsxs)("ul",{className:"space-y-1 text-xs text-white/60",children:[a.jsx("li",{children:"• Withdrawals are processed manually within 24 hours"}),a.jsx("li",{children:"• Make sure your Solana address is correct"}),a.jsx("li",{children:"• Minimum withdrawal amount is 2 SOL"}),a.jsx("li",{children:"• You can only withdraw to your own wallet"})]})]})]})})]})})}},2736:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(5344),i=t(3410),r=t.n(i);t(3824);var n=t(4212),l=t(2607);function c({children:e}){return a.jsx(l.LD,{manifestUrl:"https://musky-mini-app.vercel.app/tonconnect-manifest.json",actionsConfiguration:{twaReturnUrl:"https://musky-mini-app.vercel.app",skipRedirectToWallet:"always"},children:e})}var o=t(4669);function d({children:e}){return(0,a.jsxs)("html",{lang:"en",children:[(0,a.jsxs)("head",{children:[a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),a.jsx("meta",{name:"HandheldFriendly",content:"true"}),a.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),a.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"})]}),a.jsx("body",{className:`${r().className} overflow-x-hidden`,children:a.jsx(c,{children:(0,a.jsxs)(n.d,{children:[e,a.jsx(o.x7,{position:"bottom-center"})]})})})]})}},9089:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(5344),i=t(3729),r=t(8862);let n=({amount:e,currency:s,itemType:t,onSuccess:n,onCancel:l})=>{let{user:c,mutate:o}=function(){let{data:e,error:s,mutate:t}=(0,r.ZP)("/api/user",async e=>{let s=await fetch(e);if(!s.ok)throw Error("Failed to fetch user");return s.json()});return{user:e,isLoading:!s&&!e,isError:s,mutate:t}}(),[d,m]=(0,i.useState)(!1),[x,h]=(0,i.useState)(!1),[u,p]=(0,i.useState)(null),b=async()=>{if(!c){p("User not found. Please refresh the page.");return}m(!0),p(null);try{if("TON"===s||"Stars"===s)p("Telegram Web App is not available");else if("MUSKY"===s){if(c.balance<e){p("Insufficient MUSKY balance");return}let s=await fetch("/api/payments/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:c.user_id,amount:e,currency:"MUSKY",item_type:t})});if(s.ok)await s.json(),h(!0),o(),setTimeout(()=>{n()},1500);else{let e=await s.json();p(e.error||"Failed to process payment")}}}catch(e){console.error("Payment error:",e),p("An unexpected error occurred")}finally{m(!1)}};(0,i.useEffect)(()=>{let e=setTimeout(()=>{b()},500);return()=>clearTimeout(e)},[]);let f=(()=>{let t={};return"TON"===s?(t.MUSKY=8e3*e,t.Stars=500*e):"Stars"===s?(t.MUSKY=16*e,t.TON=e/500):"MUSKY"===s&&(t.TON=e/8e3,t.Stars=e/16),t})();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Processing Payment"}),a.jsx("p",{className:"text-white/60",children:d?"Processing your payment...":x?"Payment successful!":u?"Payment failed":`Paying ${e} ${s} for ${t}`})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-white/60",children:"Amount:"}),(0,a.jsxs)("span",{className:"font-bold",children:[e," ",s]})]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-white/60",children:["MUSKY"!==s&&(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Equivalent MUSKY:"}),(0,a.jsxs)("span",{children:[f.MUSKY.toLocaleString()," MUSKY"]})]}),"TON"!==s&&(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Equivalent TON:"}),(0,a.jsxs)("span",{children:[f.TON.toFixed(4)," TON"]})]}),"Stars"!==s&&(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Equivalent Stars:"}),(0,a.jsxs)("span",{children:[f.Stars.toLocaleString()," Stars"]})]})]})]}),a.jsx("div",{className:"flex justify-center",children:d?(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-t-accent border-white/20 rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-white/60",children:"Processing payment..."})]}):x?(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("p",{className:"text-green-400",children:"Payment successful!"})]}):u?(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("p",{className:"text-red-400 mb-2",children:u}),a.jsx("button",{onClick:l,className:"px-4 py-2 bg-black/20 rounded-lg hover:bg-black/30 transition-colors",children:"Go Back"})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-t-accent border-white/20 rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-white/60",children:"Initializing payment..."})]})})]})}},4573:(e,s,t)=>{"use strict";t.d(s,{Z:()=>c});var a=t(5344);t(3729);var i=t(6506),r=t(9410),n=t(8110),l=t(8428);function c({children:e}){let s=(0,l.usePathname)(),t=[{href:"/",label:"Home",icon:"\uD83C\uDFE0"},{href:"/tasks",label:"Tasks",icon:a.jsx(r.default,{src:"/components/assets/TASKS.png",width:24,height:24,alt:"Tasks"})},{href:"/mining",label:"Mining",icon:"⛏️"},{href:"/refer",label:"Refer",icon:"\uD83D\uDC65"},{href:"/earn",label:"Earn",icon:"\uD83D\uDCB0"}];return a.jsx("div",{className:"min-h-screen",children:(0,a.jsxs)(n.E.div,{className:"min-h-screen bg-gradient-to-b from-background-start-rgb to-background-end-rgb",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[a.jsx("main",{className:"container mx-auto px-4 py-8 pb-20",children:a.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e})}),a.jsx(n.E.nav,{className:"fixed bottom-0 left-0 right-0 bg-white/10 backdrop-blur-lg border-t border-white/20",initial:{y:100},animate:{y:0},transition:{duration:.5},children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsx("div",{className:"flex justify-between items-center py-2",children:t.map(e=>(0,a.jsxs)(i.default,{href:e.href,className:"relative flex flex-col items-center p-2 group",children:[a.jsx(n.E.span,{className:`text-2xl transition-transform duration-200 ${s===e.href?"scale-110":"scale-100"}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:e.icon}),a.jsx("span",{className:`text-xs mt-1 ${s===e.href?"text-white font-bold":"text-white/60"}`,children:e.label}),s===e.href&&a.jsx(n.E.div,{className:"absolute -bottom-2 w-12 h-1 bg-accent rounded-full",layoutId:"activeTab",transition:{type:"spring",bounce:.2}})]},e.href))})})})]})})}},4212:(e,s,t)=>{"use strict";t.d(s,{a:()=>d,d:()=>o});var a=t(5344),i=t(3729),r=t(8862),n=t(8704);let l=(0,i.createContext)({user:null,loading:!1,error:null,mutate:async()=>{}}),c="12345";function o({children:e}){let{data:s,error:t,isLoading:i,mutate:o}=(0,r.ZP)("user",async()=>{try{console.log("Fetching user data...");let{data:e,error:s}=await n.O.from("users").select("*").eq("user_id",c).single();if(console.log("Existing user data:",e),console.log("Fetch error:",s),s){if("PGRST116"===s.code){console.log("User not found, creating new user...");let{data:e,error:s}=await n.O.from("users").insert({user_id:c,balance:0,solana_balance:0,energy:1200,spin_energy:1200,last_spin_energy_reset:new Date().toISOString(),level:"1",is_admin:!1}).select().single();if(s)throw console.error("Error creating new user:",s),s;return console.log("New user created:",e),e}throw s}if(e&&(void 0===e.spin_energy||null===e.spin_energy||0===e.spin_energy)){console.log("Updating user with spin energy...");let{data:e,error:s}=await n.O.from("users").update({spin_energy:1200,last_spin_energy_reset:new Date().toISOString()}).eq("user_id",c).select().single();if(s)throw console.error("Error updating user:",s),s;return console.log("User updated with spin energy:",e),e}if(e.last_spin_energy_reset){let s=new Date(e.last_spin_energy_reset),t=new Date;if((t.getTime()-s.getTime())/36e5>=12){console.log("Resetting spin energy after 12 hours...");let{data:e,error:s}=await n.O.from("users").update({spin_energy:1200,last_spin_energy_reset:t.toISOString()}).eq("user_id",c).select().single();if(s)throw console.error("Error resetting energy:",s),s;return console.log("Energy reset complete:",e),e}}return e}catch(e){throw console.error("Error in user context:",e),e}});return a.jsx(l.Provider,{value:{user:s,loading:i,error:t,mutate:o},children:e})}function d(){return(0,i.useContext)(l)}},8704:(e,s,t)=>{"use strict";t.d(s,{O:()=>n});var a=t(6755);let i="https://pkaooixolhnhdyajwlgw.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrYW9vaXhvbGhuaGR5YWp3bGd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk5NDQzMDEsImV4cCI6MjA1NTUyMDMwMX0.ATOLcUZaP--eojDV0ugG0bujlOkzam0q7A6e9IIKnxY";if(!i||!r)throw Error("Missing Supabase credentials");let n=(0,a.eI)(i,r)},7937:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>n});let a=(0,t(6843).createProxy)(String.raw`/Users/sauravlamichhane/Downloads/Musky-master/src/app/earn/page.tsx`),{__esModule:i,$$typeof:r}=a,n=a.default},1342:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>n});let a=(0,t(6843).createProxy)(String.raw`/Users/sauravlamichhane/Downloads/Musky-master/src/app/layout.tsx`),{__esModule:i,$$typeof:r}=a,n=a.default},3824:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[638,575,139],()=>t(5302));module.exports=a})();