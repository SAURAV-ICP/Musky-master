(()=>{var e={};e.id=379,e.ids=[379],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5221:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=a(482),s=a(9108),l=a(2563),n=a.n(l),i=a(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["daily",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9082)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/daily/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,1342)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/sauravlamichhane/Downloads/Musky-master/src/app/daily/page.tsx"],u="/daily/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/daily/page",pathname:"/daily",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6309:(e,t,a)=>{Promise.resolve().then(a.bind(a,3396))},3396:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(5344),s=a(3729),l=a(8110),n=a(4669),i=a(9607),o=a(4212),d=a(8704);let c=[{day:1,amount:100,label:"Day 1"},{day:2,amount:200,label:"Day 2"},{day:3,amount:300,label:"Day 3"},{day:4,amount:400,label:"Day 4"},{day:5,amount:500,label:"Day 5"},{day:6,amount:750,label:"Day 6"},{day:7,amount:1e3,label:"Day 7 - Weekly Bonus!"},{day:8,amount:500,label:"Day 8"},{day:9,amount:600,label:"Day 9"},{day:10,amount:700,label:"Day 10"},{day:11,amount:800,label:"Day 11"},{day:12,amount:900,label:"Day 12"},{day:13,amount:1e3,label:"Day 13"},{day:14,amount:2e3,label:"Day 14 - Bi-weekly Bonus!"},{day:15,amount:1e3,label:"Day 15"},{day:16,amount:1100,label:"Day 16"},{day:17,amount:1200,label:"Day 17"},{day:18,amount:1300,label:"Day 18"},{day:19,amount:1400,label:"Day 19"},{day:20,amount:1500,label:"Day 20"},{day:21,amount:3e3,label:"Day 21 - Triple Week Bonus!"},{day:22,amount:1500,label:"Day 22"},{day:23,amount:1600,label:"Day 23"},{day:24,amount:1700,label:"Day 24"},{day:25,amount:1800,label:"Day 25"},{day:26,amount:1900,label:"Day 26"},{day:27,amount:2e3,label:"Day 27"},{day:28,amount:5e3,label:"Day 28 - Monthly Bonus!"},{day:29,amount:2e3,label:"Day 29"},{day:30,amount:2500,label:"Day 30 - Monthly Finale!"}],u=e=>{if(e<=30)return c[e-1];let t=Math.floor((e-1)/30),a=(e-1)%30+1,r=c[a-1];return{day:a,amount:Math.floor(r.amount*(1+.1*t)),label:r.label+` (Cycle ${t+1})`}};function m(){let{user:e,loading:t,mutate:a}=(0,o.a)(),[m,x]=(0,s.useState)(0),[y,p]=(0,s.useState)(null),[b,h]=(0,s.useState)(""),[g,f]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),[D,_]=(0,s.useState)(!1),[v,N]=(0,s.useState)(0);(0,s.useEffect)(()=>{e?.user_id&&k()},[e]),(0,s.useEffect)(()=>{let e=setInterval(()=>{q()},1e3);return()=>clearInterval(e)},[e]);let k=async()=>{if(e?.user_id)try{let{data:t,error:a}=await d.O.from("daily_claims").select("*").eq("user_id",e.user_id).single();if(a){if("PGRST116"===a.code){let{data:t,error:a}=await d.O.from("daily_claims").insert({user_id:e.user_id,current_streak:0,last_claim_date:null,total_claims:0}).select().single();if(a)throw a;x(0),p(u(1)),f(!0);return}throw a}let r=t.last_claim_date?new Date(t.last_claim_date):null,s=new Date;if(r){let e=new Date(r.setHours(0,0,0,0)),a=(new Date(s.setHours(0,0,0,0)).getTime()-e.getTime())/864e5;if(0===a){x(t.current_streak),p(u(t.current_streak+1)),f(!1);let e=new Date;e.setDate(e.getDate()+1),e.setHours(0,0,0,0),q(e)}else 1===a?(x(t.current_streak),p(u(t.current_streak+1))):(x(0),p(u(1))),f(!0)}else x(0),p(u(1)),f(!0)}catch(e){console.error("Error fetching daily claim data:",e),n.Am.error("Failed to load daily claim data")}},q=e=>{if(!g){let t=new Date,a=(e||new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)).getTime()-t.getTime();if(a<=0){f(!0),h("");return}h(`${Math.floor(a/36e5).toString().padStart(2,"0")}:${Math.floor(a%36e5/6e4).toString().padStart(2,"0")}:${Math.floor(a%6e4/1e3).toString().padStart(2,"0")}`)}},S=async()=>{if(e?.user_id&&g&&y){w(!0);try{let{data:t,error:r}=await d.O.from("daily_claims").select("*").eq("user_id",e.user_id).single();if(r&&"PGRST116"!==r.code)throw r;let s=new Date,l=t?t.current_streak+1:1,n=u(l),{error:i}=await d.O.from("daily_claims").upsert({user_id:e.user_id,current_streak:l,last_claim_date:s.toISOString(),total_claims:(t?.total_claims||0)+1});if(i)throw i;let{error:o}=await d.O.from("users").update({balance:e.balance+n.amount}).eq("user_id",e.user_id);if(o)throw o;N(n.amount),_(!0),x(l),p(u(l+1)),f(!1);let c=new Date;c.setDate(c.getDate()+1),c.setHours(0,0,0,0),q(c),await a(),setTimeout(()=>{_(!1)},3e3)}catch(e){console.error("Error claiming daily reward:",e),n.Am.error("Failed to claim daily reward")}finally{w(!1)}}},M=e=>e.toLocaleString(void 0,{maximumFractionDigits:0});return t?r.jsx(i.Z,{children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-accent"})})})}):r.jsx(i.Z,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Daily Rewards"}),r.jsx("p",{className:"text-white/60",children:"Claim MUSKY tokens every day to build your streak"})]}),(0,r.jsxs)("div",{className:"bg-primary-dark p-3 rounded-xl",children:[r.jsx("p",{className:"text-sm text-white/60",children:"Your Balance"}),(0,r.jsxs)("p",{className:"text-xl font-bold",children:[M(e?.balance||0)," MUSKY"]})]})]}),r.jsx("div",{className:"bg-primary-dark rounded-xl p-6 mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,r.jsxs)("div",{className:"mb-4 md:mb-0",children:[r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Current Streak"}),(0,r.jsxs)("div",{className:"flex items-baseline",children:[r.jsx("span",{className:"text-4xl font-bold text-accent",children:m}),r.jsx("span",{className:"text-white/60 ml-2",children:"days"})]}),m>0&&r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Keep your streak going by claiming daily!"})]}),r.jsx("div",{className:"text-center",children:g?(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-white/60 mb-2",children:"Today's Reward"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-green-400 mb-3",children:[y?M(y.amount):0," MUSKY"]}),r.jsx(l.E.button,{className:"px-6 py-3 bg-accent hover:bg-accent/80 rounded-lg font-bold",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:j,onClick:S,children:j?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[r.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Claiming..."]}):"Claim Reward"})]}):(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-white/60 mb-2",children:"Next Reward Available In"}),r.jsx("p",{className:"text-2xl font-bold mb-3",children:b}),r.jsx("p",{className:"text-sm text-white/60",children:"Come back tomorrow!"})]})})]})}),r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Upcoming Rewards"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8",children:Array.from({length:5}).map((e,t)=>{let a=u(m+t+1),s=0===t;return(0,r.jsxs)("div",{className:`bg-primary-dark rounded-xl p-4 ${s?"border-2 border-accent":""}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm text-white/60",children:a.label}),s&&r.jsx("span",{className:"bg-accent/20 text-accent text-xs px-2 py-1 rounded-full",children:"Next"})]}),(0,r.jsxs)("p",{className:"text-xl font-bold",children:[M(a.amount)," MUSKY"]})]},t)})}),r.jsx("h2",{className:"text-xl font-bold mb-4",children:"30-Day Reward Calendar"}),r.jsx("div",{className:"bg-primary-dark rounded-xl p-6 overflow-x-auto",children:r.jsx("div",{className:"grid grid-cols-7 gap-3 min-w-[700px]",children:c.map((e,t)=>{let a=e.day<=m,s=e.day===m+1,l=e.day%7==0;return(0,r.jsxs)("div",{className:`p-3 rounded-lg ${a?"bg-green-500/20 border border-green-500/30":s?"bg-accent/20 border-2 border-accent":l?"bg-orange-500/20 border border-orange-500/30":"bg-black/20"}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsxs)("span",{className:`text-xs ${a?"text-green-400":s?"text-accent":"text-white/60"}`,children:["Day ",e.day]}),a&&r.jsx("span",{className:"text-xs bg-green-500/30 text-green-400 px-1.5 py-0.5 rounded-full",children:"Claimed"})]}),r.jsx("p",{className:`font-bold ${a?"text-green-400":s?"text-accent":l?"text-orange-400":"text-white"}`,children:M(e.amount)})]},t)})})}),D&&r.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:(0,r.jsxs)(l.E.div,{initial:{scale:.5,opacity:0},animate:{scale:[.5,1.2,1],opacity:[0,1,1,0],y:[0,-50,-100]},transition:{duration:3,times:[0,.3,.8,1]},className:"text-4xl font-bold text-green-400 bg-black/50 px-6 py-3 rounded-xl backdrop-blur-sm",children:["+",M(v)," MUSKY"]})})]})})}},9082:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>s,default:()=>n});let r=(0,a(6843).createProxy)(String.raw`/Users/sauravlamichhane/Downloads/Musky-master/src/app/daily/page.tsx`),{__esModule:s,$$typeof:l}=r,n=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,8575,8110,3822],()=>a(5221));module.exports=r})();