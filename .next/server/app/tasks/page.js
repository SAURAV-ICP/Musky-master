(()=>{var e={};e.id=7289,e.ids=[7289],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5734:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o});var r=s(482),a=s(9108),i=s(2563),n=s.n(i),l=s(8300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["tasks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7777)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/tasks/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/sauravlamichhane/Downloads/Musky-master/src/app/tasks/page.tsx"],u="/tasks/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/tasks/page",pathname:"/tasks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6037:(e,t,s)=>{Promise.resolve().then(s.bind(s,5706))},5706:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(5344),a=s(3729),i=s(4573),n=s(8110),l=s(4212),c=s(4669),o=s(8428),d=s(8704),u=s(3644);let m=({notifications:e,onDismiss:t})=>r.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.jsx(u.M,{children:e.map(e=>r.jsx(n.E.div,{initial:{opacity:0,x:100,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.9},className:`bg-black/80 backdrop-blur-lg rounded-lg p-4 shadow-lg border border-white/10 w-80 ${"success"===e.type?"border-green-500/50":"error"===e.type?"border-red-500/50":"border-white/10"}`,children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-xl
                ${"success"===e.type?"bg-green-500/20 text-green-400":"error"===e.type?"bg-red-500/20 text-red-400":"bg-primary/30 text-white"}`,children:"success"===e.type?"✓":"error"===e.type?"✕":"ℹ"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${"success"===e.type?"text-green-400":"error"===e.type?"text-red-400":"text-white/90"}`,children:e.message}),e.amount&&"success"===e.type&&(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center space-x-2 mt-1",children:[r.jsx("span",{className:"text-xs text-white/60",children:"Reward:"}),(0,r.jsxs)(n.E.span,{className:"text-sm font-bold text-green-400",initial:{scale:1},animate:{scale:[1,1.2,1]},transition:{duration:.5},children:["+",e.amount," MUSKY"]})]})]}),r.jsx("button",{onClick:()=>t(e.id),className:"text-white/60 hover:text-white",children:"✕"})]})},e.id))})});var p=s(9410);function x(){let{user:e}=(0,l.a)(),[t,s]=(0,a.useState)([]),[u,x]=(0,a.useState)([]),[h,f]=(0,a.useState)([]),[g,y]=(0,a.useState)({}),[w,b]=(0,a.useState)("available"),v=(0,o.useRouter)();(0,a.useEffect)(()=>{e&&(k(),j())},[e]),(0,a.useEffect)(()=>{let e=d.O.channel("task_notifications").on("broadcast",{event:"task_completed"},e=>{let{type:t,message:s,amount:r}=e.payload,a=Date.now();f(e=>[...e,{id:a.toString(),type:t,message:s,amount:r,timestamp:a}]),setTimeout(()=>{f(e=>e.filter(e=>e.id!==a.toString()))},5e3),k(),j()}).subscribe();return()=>{d.O.removeChannel(e)}},[]);let k=async()=>{if(e)try{let{data:t}=await d.O.from("task_clicks").select("task_id").eq("user_id",e.user_id),r=t?.map(e=>e.task_id)||[],{data:a,error:i}=await d.O.from("task_submissions").select("*").eq("status","approved").eq("active",!0).order("created_at",{ascending:!1}).then(e=>{if(e.error)throw e.error;return{data:e.data?.filter(e=>!r.includes(e.id))||[],error:null}});if(i)throw i;s(a||[])}catch(e){console.error("Error fetching tasks:",e),c.Am.error("Failed to fetch tasks")}},j=async()=>{if(e)try{let{data:t}=await d.O.from("task_clicks").select("task_id").eq("user_id",e.user_id);if(!t?.length){x([]);return}let s=t.map(e=>e.task_id),{data:r,error:a}=await d.O.from("task_submissions").select("*").in("id",s).order("created_at",{ascending:!1});if(a)throw a;x(r||[])}catch(e){console.error("Error fetching completed tasks:",e),c.Am.error("Failed to fetch completed tasks")}},N=async t=>{if(e)try{y(e=>({...e,[t.id]:!0})),window.open(t.link,"_blank"),setTimeout(async()=>{try{let{error:s}=await d.O.from("task_clicks").insert({task_id:t.id,user_id:e.user_id});if(s)throw s;let{data:r,error:a}=await d.O.from("users").select("balance").eq("user_id",e.user_id).single();if(a)throw a;let{error:i}=await d.O.from("users").update({balance:(r?.balance||0)+t.payment_amount}).eq("user_id",e.user_id);if(i)throw i;_({id:Date.now().toString(),type:"success",message:"Task completed successfully!",amount:t.payment_amount,timestamp:Date.now()}),k(),j()}catch(e){console.error("Error completing task:",e),_({id:Date.now().toString(),type:"error",message:"Failed to complete task",timestamp:Date.now()})}finally{y(e=>({...e,[t.id]:!1}))}},1e4)}catch(e){console.error("Error handling task:",e),y(e=>({...e,[t.id]:!1}))}},_=e=>{f(t=>[e,...t]),setTimeout(()=>E(e.id),5e3)},E=e=>{f(t=>t.filter(t=>t.id!==e))},q=e=>{switch(e){case"telegram":return"/images/telegram.png";case"youtube":return"/images/youtube.png";case"twitter":return"/images/twitter.png";default:return"/images/link.png"}},C=e=>{switch(e){case"telegram":return"Join";case"youtube":return"Subscribe";case"twitter":return"Follow";default:return"Complete"}};return e?(0,r.jsxs)(i.Z,{children:[r.jsx(m,{notifications:h,onDismiss:E}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:"flex justify-end mb-6",children:(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>b("available"),className:`px-6 py-2 rounded-lg font-medium transition-all ${"available"===w?"bg-accent text-white shadow-lg shadow-accent/20":"bg-primary/20 text-white/60 hover:bg-primary/30"}`,children:"Available Tasks"}),r.jsx("button",{onClick:()=>b("completed"),className:`px-6 py-2 rounded-lg font-medium transition-all ${"completed"===w?"bg-accent text-white shadow-lg shadow-accent/20":"bg-primary/20 text-white/60 hover:bg-primary/30"}`,children:"Completed Tasks"})]})}),r.jsx("div",{className:"space-y-4",children:"available"===w?t.length>0?t.map(e=>r.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-primary/20 backdrop-blur-lg rounded-xl p-6 border border-white/10",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(p.default,{src:q(e.type),alt:e.type,width:24,height:24,className:"w-6 h-6"}),r.jsx("h3",{className:"text-xl font-semibold",children:e.title})]}),r.jsx("p",{className:"mt-2 text-white/60",children:e.description}),r.jsx("div",{className:"mt-2",children:(0,r.jsxs)("span",{className:"text-accent text-lg font-semibold",children:["+",e.payment_amount," MUSKY"]})})]}),r.jsx(n.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`px-6 py-2 rounded-lg font-semibold ${g[e.id]?"bg-primary/50 cursor-wait":"bg-accent hover:bg-accent/80"}`,onClick:()=>!g[e.id]&&N(e),disabled:g[e.id],children:g[e.id]?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(n.E.div,{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),r.jsx("span",{children:"Processing..."})]}):C(e.type)})]})},e.id)):(0,r.jsxs)("div",{className:"text-center py-12 text-white/60",children:[r.jsx("p",{className:"text-6xl mb-4",children:"\uD83C\uDFAF"}),r.jsx("p",{className:"text-xl",children:"No tasks available right now"}),r.jsx("p",{className:"mt-2",children:"Check back later for new tasks!"})]}):u.length>0?u.map(e=>r.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-primary/10 backdrop-blur-lg rounded-xl p-6 border border-white/5",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(p.default,{src:q(e.type),alt:e.type,width:24,height:24,className:"w-6 h-6"}),r.jsx("h3",{className:"text-xl font-semibold text-white/60",children:e.title})]}),r.jsx("p",{className:"mt-2 text-white/40",children:e.description}),r.jsx("div",{className:"mt-2",children:(0,r.jsxs)("span",{className:"text-green-400 text-lg font-semibold",children:["+",e.payment_amount," MUSKY"]})})]}),r.jsx("div",{className:"px-4 py-1 rounded-full bg-green-500/20 text-green-400 text-sm font-medium",children:"Completed"})]})},e.id)):(0,r.jsxs)("div",{className:"text-center py-12 text-white/60",children:[r.jsx("p",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),r.jsx("p",{className:"text-xl",children:"No completed tasks yet"}),r.jsx("p",{className:"mt-2",children:"Complete some tasks to earn rewards!"})]})}),"available"===w&&r.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 p-6 bg-primary/20 backdrop-blur-lg rounded-xl border border-white/10",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Create Your Own Campaign"}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Launch custom tasks and earn when others complete them"})]}),r.jsx(n.E.button,{className:"px-6 py-2 bg-accent rounded-lg font-medium text-white shadow-lg shadow-accent/20",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v.push("/tasks/marketplace"),children:"Open Marketplace"})]})})]})]}):r.jsx(i.Z,{children:r.jsx("div",{className:"max-w-2xl mx-auto px-4 flex items-center justify-center min-h-[400px]",children:r.jsx("p",{className:"text-white/60",children:"Please log in to view tasks"})})})}},7777:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`/Users/sauravlamichhane/Downloads/Musky-master/src/app/tasks/page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default},3644:(e,t,s)=>{"use strict";s.d(t,{M:()=>f});var r=s(3729),a=s(9038);function i(){let e=(0,r.useRef)(!1);return(0,a.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var n=s(1475),l=s(5986),c=s(207);class o extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){let s=(0,r.useId)(),a=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{let{width:e,height:r,top:n,left:l}=i.current;if(t||!a.current||!e||!r)return;a.current.dataset.motionPopId=s;let c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            top: ${n}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),r.createElement(o,{isPresent:t,childRef:a,sizeRef:i},r.cloneElement(e,{ref:a}))}let u=({children:e,initial:t,isPresent:s,onExitComplete:a,custom:i,presenceAffectsLayout:n,mode:o})=>{let u=(0,c.h)(m),p=(0,r.useId)(),x=(0,r.useMemo)(()=>({id:p,initial:t,isPresent:s,custom:i,onExitComplete:e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))}),n?void 0:[s]);return(0,r.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[s]),r.useEffect(()=>{s||u.size||!a||a()},[s]),"popLayout"===o&&(e=r.createElement(d,{isPresent:s},e)),r.createElement(l.O.Provider,{value:x},e)};function m(){return new Map}var p=s(6828),x=s(7222);let h=e=>e.key||"",f=({children:e,custom:t,initial:s=!0,onExitComplete:l,exitBeforeEnter:c,presenceAffectsLayout:o=!0,mode:d="sync"})=>{var m;(0,x.k)(!c,"Replace exitBeforeEnter with mode='wait'");let f=(0,r.useContext)(p.p).forceRender||function(){let e=i(),[t,s]=(0,r.useState)(0),a=(0,r.useCallback)(()=>{e.current&&s(t+1)},[t]);return[(0,r.useCallback)(()=>n.Wi.postRender(a),[a]),t]}()[0],g=i(),y=function(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(e),w=y,b=(0,r.useRef)(new Map).current,v=(0,r.useRef)(w),k=(0,r.useRef)(new Map).current,j=(0,r.useRef)(!0);if((0,a.L)(()=>{j.current=!1,function(e,t){e.forEach(e=>{let s=h(e);t.set(s,e)})}(y,k),v.current=w}),m=()=>{j.current=!0,k.clear(),b.clear()},(0,r.useEffect)(()=>()=>m(),[]),j.current)return r.createElement(r.Fragment,null,w.map(e=>r.createElement(u,{key:h(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:o,mode:d},e)));w=[...w];let N=v.current.map(h),_=y.map(h),E=N.length;for(let e=0;e<E;e++){let t=N[e];-1!==_.indexOf(t)||b.has(t)||b.set(t,void 0)}return"wait"===d&&b.size&&(w=[]),b.forEach((e,s)=>{if(-1!==_.indexOf(s))return;let a=k.get(s);if(!a)return;let i=N.indexOf(s),n=e;n||(n=r.createElement(u,{key:h(a),isPresent:!1,onExitComplete:()=>{b.delete(s);let e=Array.from(k.keys()).filter(e=>!_.includes(e));if(e.forEach(e=>k.delete(e)),v.current=y.filter(t=>{let r=h(t);return r===s||e.includes(r)}),!b.size){if(!1===g.current)return;f(),l&&l()}},custom:t,presenceAffectsLayout:o,mode:d},a),b.set(s,n)),w.splice(i,0,n)}),w=w.map(e=>{let t=e.key;return b.has(t)?e:r.createElement(u,{key:h(e),isPresent:!0,presenceAffectsLayout:o,mode:d},e)}),r.createElement(r.Fragment,null,b.size?w:w.map(e=>(0,r.cloneElement)(e)))}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,8575,8110,7822,9657],()=>s(5734));module.exports=r})();