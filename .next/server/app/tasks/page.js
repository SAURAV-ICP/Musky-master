(()=>{var e={};e.id=289,e.ids=[289],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5734:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>o});var a=s(482),r=s(9108),i=s(2563),l=s.n(i),n=s(8300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let o=["",{children:["tasks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7777)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/tasks/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/sauravlamichhane/Downloads/Musky-master/src/app/tasks/page.tsx"],m="/tasks/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/tasks/page",pathname:"/tasks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6037:(e,t,s)=>{Promise.resolve().then(s.bind(s,5706))},5706:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5344),r=s(3729),i=s(4573),l=s(8110),n=s(4212),c=s(4669),o=s(8428),d=s(8704),m=s(3644);let x=({notifications:e,onDismiss:t})=>a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:a.jsx(m.M,{children:e.map(e=>a.jsx(l.E.div,{initial:{opacity:0,x:100,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.9},className:`bg-black/80 backdrop-blur-lg rounded-lg p-4 shadow-lg border border-white/10 w-80 ${"success"===e.type?"border-green-500/50":"error"===e.type?"border-red-500/50":"border-white/10"}`,children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-xl
                ${"success"===e.type?"bg-green-500/20 text-green-400":"error"===e.type?"bg-red-500/20 text-red-400":"bg-primary/30 text-white"}`,children:"success"===e.type?"✓":"error"===e.type?"✕":"ℹ"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:`text-sm ${"success"===e.type?"text-green-400":"error"===e.type?"text-red-400":"text-white/90"}`,children:e.message}),e.amount&&"success"===e.type&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center space-x-2 mt-1",children:[a.jsx("span",{className:"text-xs text-white/60",children:"Reward:"}),(0,a.jsxs)(l.E.span,{className:"text-sm font-bold text-green-400",initial:{scale:1},animate:{scale:[1,1.2,1]},transition:{duration:.5},children:["+",e.amount," MUSKY"]})]})]}),a.jsx("button",{onClick:()=>t(e.id),className:"text-white/60 hover:text-white",children:"✕"})]})},e.id))})});var u=s(9410);function p(){let{user:e}=(0,n.a)(),[t,s]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[h,g]=(0,r.useState)([]),[y,b]=(0,r.useState)({}),[w,f]=(0,r.useState)("available"),j=(0,o.useRouter)();(0,r.useEffect)(()=>{e&&(v(),k())},[e]),(0,r.useEffect)(()=>{let e=d.O.channel("task_notifications").on("broadcast",{event:"task_completed"},e=>{let{type:t,message:s,amount:a}=e.payload,r=Date.now();g(e=>[...e,{id:r.toString(),type:t,message:s,amount:a,timestamp:r}]),setTimeout(()=>{g(e=>e.filter(e=>e.id!==r.toString()))},5e3),v(),k()}).subscribe();return()=>{d.O.removeChannel(e)}},[]);let v=async()=>{if(e)try{let{data:t}=await d.O.from("task_clicks").select("task_id").eq("user_id",e.user_id),a=t?.map(e=>e.task_id)||[],{data:r,error:i}=await d.O.from("task_submissions").select("*").eq("status","approved").eq("active",!0).order("created_at",{ascending:!1}).then(e=>{if(e.error)throw e.error;return{data:e.data?.filter(e=>!a.includes(e.id))||[],error:null}});if(i)throw i;s(r||[])}catch(e){console.error("Error fetching tasks:",e),c.Am.error("Failed to fetch tasks")}},k=async()=>{if(e)try{let{data:t}=await d.O.from("task_clicks").select("task_id").eq("user_id",e.user_id);if(!t?.length){p([]);return}let s=t.map(e=>e.task_id),{data:a,error:r}=await d.O.from("task_submissions").select("*").in("id",s).order("created_at",{ascending:!1});if(r)throw r;p(a||[])}catch(e){console.error("Error fetching completed tasks:",e),c.Am.error("Failed to fetch completed tasks")}},N=async t=>{if(e)try{b(e=>({...e,[t.id]:!0})),window.open(t.link,"_blank"),setTimeout(async()=>{try{let{error:s}=await d.O.from("task_clicks").insert({task_id:t.id,user_id:e.user_id});if(s)throw s;let{data:a,error:r}=await d.O.from("users").select("balance").eq("user_id",e.user_id).single();if(r)throw r;let{error:i}=await d.O.from("users").update({balance:(a?.balance||0)+t.payment_amount}).eq("user_id",e.user_id);if(i)throw i;_({id:Date.now().toString(),type:"success",message:"Task completed successfully!",amount:t.payment_amount,timestamp:Date.now()}),v(),k()}catch(e){console.error("Error completing task:",e),_({id:Date.now().toString(),type:"error",message:"Failed to complete task",timestamp:Date.now()})}finally{b(e=>({...e,[t.id]:!1}))}},1e4)}catch(e){console.error("Error handling task:",e),b(e=>({...e,[t.id]:!1}))}},_=e=>{g(t=>[e,...t]),setTimeout(()=>q(e.id),5e3)},q=e=>{g(t=>t.filter(t=>t.id!==e))},E=e=>{switch(e){case"telegram":return"/images/telegram.png";case"youtube":return"/images/youtube.png";case"twitter":return"/images/twitter.png";default:return"/images/link.png"}},C=e=>{switch(e){case"telegram":return"Join";case"youtube":return"Subscribe";case"twitter":return"Follow";default:return"Complete"}};return e?(0,a.jsxs)(i.Z,{children:[a.jsx(x,{notifications:h,onDismiss:q}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex justify-end mb-6",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[a.jsx("button",{onClick:()=>f("available"),className:`px-6 py-2 rounded-lg font-medium transition-all ${"available"===w?"bg-accent text-white shadow-lg shadow-accent/20":"bg-primary/20 text-white/60 hover:bg-primary/30"}`,children:"Available Tasks"}),a.jsx("button",{onClick:()=>f("completed"),className:`px-6 py-2 rounded-lg font-medium transition-all ${"completed"===w?"bg-accent text-white shadow-lg shadow-accent/20":"bg-primary/20 text-white/60 hover:bg-primary/30"}`,children:"Completed Tasks"})]})}),a.jsx("div",{className:"space-y-4",children:"available"===w?t.length>0?t.map(e=>a.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-primary/20 backdrop-blur-lg rounded-xl p-6 border border-white/10",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(u.default,{src:E(e.type),alt:e.type,width:24,height:24,className:"w-6 h-6"}),a.jsx("h3",{className:"text-xl font-semibold",children:e.title})]}),a.jsx("p",{className:"mt-2 text-white/60",children:e.description}),a.jsx("div",{className:"mt-2",children:(0,a.jsxs)("span",{className:"text-accent text-lg font-semibold",children:["+",e.payment_amount," MUSKY"]})})]}),a.jsx(l.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`px-6 py-2 rounded-lg font-semibold ${y[e.id]?"bg-primary/50 cursor-wait":"bg-accent hover:bg-accent/80"}`,onClick:()=>!y[e.id]&&N(e),disabled:y[e.id],children:y[e.id]?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(l.E.div,{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),a.jsx("span",{children:"Processing..."})]}):C(e.type)})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-12 text-white/60",children:[a.jsx("p",{className:"text-6xl mb-4",children:"\uD83C\uDFAF"}),a.jsx("p",{className:"text-xl",children:"No tasks available right now"}),a.jsx("p",{className:"mt-2",children:"Check back later for new tasks!"})]}):m.length>0?m.map(e=>a.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-primary/10 backdrop-blur-lg rounded-xl p-6 border border-white/5",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(u.default,{src:E(e.type),alt:e.type,width:24,height:24,className:"w-6 h-6"}),a.jsx("h3",{className:"text-xl font-semibold text-white/60",children:e.title})]}),a.jsx("p",{className:"mt-2 text-white/40",children:e.description}),a.jsx("div",{className:"mt-2",children:(0,a.jsxs)("span",{className:"text-green-400 text-lg font-semibold",children:["+",e.payment_amount," MUSKY"]})})]}),a.jsx("div",{className:"px-4 py-1 rounded-full bg-green-500/20 text-green-400 text-sm font-medium",children:"Completed"})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-12 text-white/60",children:[a.jsx("p",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),a.jsx("p",{className:"text-xl",children:"No completed tasks yet"}),a.jsx("p",{className:"mt-2",children:"Complete some tasks to earn rewards!"})]})}),"available"===w&&a.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 p-6 bg-primary/20 backdrop-blur-lg rounded-xl border border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:"Create Your Own Campaign"}),a.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Launch custom tasks and earn when others complete them"})]}),a.jsx(l.E.button,{className:"px-6 py-2 bg-accent rounded-lg font-medium text-white shadow-lg shadow-accent/20",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j.push("/tasks/marketplace"),children:"Open Marketplace"})]})})]})]}):a.jsx(i.Z,{children:a.jsx("div",{className:"max-w-2xl mx-auto px-4 flex items-center justify-center min-h-[400px]",children:a.jsx("p",{className:"text-white/60",children:"Please log in to view tasks"})})})}},7777:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});let a=(0,s(6843).createProxy)(String.raw`/Users/sauravlamichhane/Downloads/Musky-master/src/app/tasks/page.tsx`),{__esModule:r,$$typeof:i}=a,l=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,575,139,876],()=>s(5734));module.exports=a})();