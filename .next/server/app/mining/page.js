(()=>{var e={};e.id=617,e.ids=[617],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8275:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d});var a=t(482),i=t(9108),r=t(2563),n=t.n(r),l=t(8300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["mining",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3137)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/mining/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1342)),"/Users/sauravlamichhane/Downloads/Musky-master/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/sauravlamichhane/Downloads/Musky-master/src/app/mining/page.tsx"],x="/mining/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/mining/page",pathname:"/mining",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3047:(e,s,t)=>{Promise.resolve().then(t.bind(t,1732))},1732:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(5344),i=t(3729),r=t(4573),n=t(8110),l=t(9410),c=t(3644),d=t(9089);let o=({gpu:e,onClose:s,onPurchase:t,canPurchase:r,owned:o})=>{let[x,m]=(0,i.useState)(!1),[h,u]=(0,i.useState)("TON");if(!e)return null;let p=async()=>{m(!1),await t(e)},j=e.miningRatePerDay/86400,g=e.miningRatePerDay/1440,b=e.miningRatePerDay/24,f=30*e.miningRatePerDay;return a.jsx(c.M,{children:a.jsx(n.E.div,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,children:a.jsx(n.E.div,{className:"bg-primary/90 backdrop-blur-xl rounded-2xl w-full max-w-lg overflow-hidden",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:e=>e.stopPropagation(),children:x?(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold",children:["Purchase ",e.name]}),a.jsx("button",{onClick:()=>m(!1),className:"w-8 h-8 rounded-full bg-black/20 flex items-center justify-center text-white/80 hover:bg-black/40 transition-colors",children:"←"})]}),a.jsx(d.Z,{amount:e.price[h.toLowerCase()]||e.price.ton,currency:h,itemType:e.name,onSuccess:p,onCancel:()=>{m(!1)}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative h-48 bg-gradient-to-b from-accent/20 to-primary/20",children:[e.image.endsWith(".mov")?a.jsx("video",{src:e.image,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain"}):a.jsx(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-contain p-4"}),a.jsx("button",{onClick:s,className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-black/20 flex items-center justify-center text-white/80 hover:bg-black/40 transition-colors",children:"✕"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:e.name}),a.jsx("p",{className:"text-accent text-lg",children:e.hashrate}),(0,a.jsxs)("p",{className:"text-sm text-white/60",children:["Duration: ",e.duration]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Owned"}),(0,a.jsxs)("p",{className:"font-bold text-lg",children:[o,"/",e.maxPurchase]})]})]}),(0,a.jsxs)("div",{className:"mb-6 bg-black/20 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Mining Performance"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-white/60",children:"Per Second"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[j.toFixed(8)," SOL"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-white/60",children:"Per Minute"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[g.toFixed(6)," SOL"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-white/60",children:"Per Hour"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[b.toFixed(4)," SOL"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-white/60",children:"Per Day"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[e.miningRatePerDay.toFixed(2)," SOL"]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-white/60",children:"Total Mining (30 days)"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[f.toFixed(2)," SOL"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Estimated Value"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:["$",(150*f).toFixed(2)," USD"]})]})]})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Specifications"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-white/60",children:"CUDA Cores"}),a.jsx("p",{className:"font-bold",children:e.specs.cores.toLocaleString()})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Memory"}),a.jsx("p",{className:"font-bold",children:e.specs.memory})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Power Draw"}),a.jsx("p",{className:"font-bold",children:e.specs.power})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Mining Efficiency"}),a.jsx("p",{className:"font-bold",children:e.specs.efficiency})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),a.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:e.description})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Payment Options"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.price.ton&&a.jsx(n.E.button,{className:`py-2 px-3 rounded-lg text-center ${"TON"===h?"bg-accent text-white":"bg-black/20 text-white/70"}`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u("TON"),children:(0,a.jsxs)("div",{className:"font-bold",children:[e.price.ton," TON"]})}),e.price.stars&&a.jsx(n.E.button,{className:`py-2 px-3 rounded-lg text-center ${"Stars"===h?"bg-accent text-white":"bg-black/20 text-white/70"}`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u("Stars"),children:(0,a.jsxs)("div",{className:"font-bold",children:[e.price.stars.toLocaleString()," Stars"]})}),e.price.musky&&a.jsx(n.E.button,{className:`py-2 px-3 rounded-lg text-center ${"MUSKY"===h?"bg-accent text-white":"bg-black/20 text-white/70"}`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u("MUSKY"),children:(0,a.jsxs)("div",{className:"font-bold",children:[e.price.musky.toLocaleString()," MUSKY"]})})]}),a.jsx(n.E.button,{className:`w-full py-3 rounded-lg font-bold ${r?"bg-orange-500 hover:bg-orange-400":"bg-gray-500 cursor-not-allowed"}`,whileHover:r?{scale:1.02}:{},whileTap:r?{scale:.98}:{},onClick:()=>{r&&m(!0)},children:r?`Purchase with ${h}`:"Locked"}),!r&&o<e.maxPurchase&&a.jsx("p",{className:"text-xs text-orange-400 mt-2 text-center",children:"RTX5070"===e.name?"You need to own at least one RTX4090 first":"RTX5090"===e.name?"You need to own at least one RTX5070 first":"Maximum GPU limit reached (8)"})]})]})]})})})})};var x=t(4212),m=t(4669);let h=[{id:1,name:"RTX4070",hashrate:"0.03 SOL/day",duration:"30 days",price:{musky:4e4,ton:5,stars:2500},specs:{cores:5888,memory:"12GB GDDR6X",power:"200W",efficiency:"0.00015 SOL/W/day"},image:"/components/assets/4070TI.jpg",description:"Entry-level mining GPU with reliable performance. Mines 0.03 SOL per day for 30 days (total 0.9 SOL).",maxPurchase:2,miningRatePerDay:.03},{id:2,name:"RTX4090",hashrate:"0.08 SOL/day",duration:"30 days",price:{musky:7e4,ton:9,stars:5e3},specs:{cores:16384,memory:"24GB GDDR6X",power:"450W",efficiency:"0.00018 SOL/W/day"},image:"/components/assets/4090ti.jpg",description:"High-performance GPU for serious miners. Mines 0.08 SOL per day for 30 days (total 2.4 SOL).",maxPurchase:2,miningRatePerDay:.08},{id:3,name:"RTX5070",hashrate:"0.25 SOL/day",duration:"30 days",price:{musky:125e3,ton:25,stars:12500},specs:{cores:7680,memory:"16GB GDDR7",power:"220W",efficiency:"0.00114 SOL/W/day"},image:"/components/assets/5070ti.jpg",description:"Next-gen mining GPU with enhanced efficiency. Mines 0.25 SOL per day for 30 days (total 7.5 SOL).",maxPurchase:2,miningRatePerDay:.25},{id:4,name:"RTX5090",hashrate:"0.5 SOL/day",duration:"30 days",price:{musky:25e4,ton:50,stars:25e3},specs:{cores:18432,memory:"32GB GDDR7",power:"500W",efficiency:"0.001 SOL/W/day"},image:"/components/assets/5090ti.mov",description:"Ultimate mining GPU for maximum returns. Mines 0.5 SOL per day for 30 days (total 15 SOL).",maxPurchase:2,miningRatePerDay:.5}];function u(){let{user:e,mutate:s}=(0,x.a)(),[t,c]=(0,i.useState)(null),[u,p]=(0,i.useState)({}),[j,g]=(0,i.useState)(0),[b,f]=(0,i.useState)(!1),[N,y]=(0,i.useState)("TON"),[w,v]=(0,i.useState)(!0),[S,P]=(0,i.useState)(0),[k,O]=(0,i.useState)(0),[L,M]=(0,i.useState)(0),[T,D]=(0,i.useState)(0),[R,U]=(0,i.useState)(Date.now()),[_,q]=(0,i.useState)(!1),[C,E]=(0,i.useState)(0),[F,G]=(0,i.useState)(Date.now()),[X,$]=(0,i.useState)(0);(0,i.useEffect)(()=>{if(e){K(),q("admin"===e.user_id||e.is_admin);let s=setInterval(()=>{K(),G(Date.now()),$(6e5)},6e5),t=setInterval(()=>{Y()},1e3);return()=>{clearInterval(s),clearInterval(t)}}},[e]),(0,i.useEffect)(()=>{if(e){P(e.mining_rate||0),O(e.solana_balance||0);let s=e.mining_rate||0;M(s/86400),D(s/1440),U(Date.now()),$(6e5)}},[e]);let Y=()=>{let e=Date.now(),s=(e-R)/1e3;if(S>0){O(k+L*s);let t=e-F;E(Math.min(t/6e5*100,100)),$(Math.max(0,6e5-t))}U(e)},K=async()=>{if(e?.user_id)try{v(!0);let s=await fetch(`/api/mining/gpus?user_id=${e.user_id}`);if(s.ok){let e=await s.json();if(e.gpus&&(p(e.gpus),g(e.activeCount||0)),void 0!==e.miningRate){P(e.miningRate);let s=e.miningRate;M(s/86400),D(s/1440)}void 0!==e.solanaBalance&&O(e.solanaBalance),U(Date.now()),G(Date.now()),$(6e5)}}catch(e){console.error("Failed to fetch GPU data:",e)}finally{v(!1)}},A=s=>{if(!e)return!1;if(_)return!0;let t=u[s.name]||0;return"RTX4070"===s.name||"RTX4090"===s.name?t<s.maxPurchase&&j<8:"RTX5070"===s.name?(u.RTX4090||0)>0&&t<s.maxPurchase&&j<8:"RTX5090"===s.name&&(u.RTX5070||0)>0&&t<s.maxPurchase&&j<8},W=async e=>{if(!A(e)){m.Am.error("Purchase previous GPUs first or max limit reached");return}c(e),f(!0)},B=async()=>{f(!1);try{await K(),await s(),m.Am.success(`${t?.name} purchased successfully!`)}catch(e){console.error("Error updating after purchase:",e)}c(null)},I=()=>{f(!1),c(null)};return a.jsx(r.Z,{children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Mining Farm"}),(0,a.jsxs)("p",{className:"text-white/60",children:["Active GPUs: ",j,"/8"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Mining Power"}),(0,a.jsxs)("p",{className:"text-xl font-bold",children:[S.toFixed(4)," SOL/day"]}),(0,a.jsxs)("div",{className:"text-xs text-accent",children:[L.toFixed(8)," SOL/sec • ",T.toFixed(6)," SOL/min"]})]})]}),(0,a.jsxs)("div",{className:"bg-primary/20 backdrop-blur-lg rounded-xl p-4 border border-white/10 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Solana Balance"}),a.jsx("p",{className:"text-sm text-white/60",children:"Mined SOL"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:[k.toFixed(6)," SOL"]}),(0,a.jsxs)("p",{className:"text-sm text-green-400",children:["≈ $",(150*k).toFixed(2)," USD"]})]})]}),S>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Live Mining"}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),a.jsx("p",{className:"text-sm text-green-400",children:"Active"})]})]}),a.jsx("div",{className:"mt-2 bg-black/30 rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:"bg-green-500 h-full",style:{width:`${C}%`,transition:"width 1s linear"}})}),(0,a.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,a.jsxs)("p",{className:"text-xs text-white/40",children:["+",(60*L).toFixed(6)," SOL/min"]}),(0,a.jsxs)("p",{className:"text-xs text-white/40",children:["Next update: ",Math.floor(X/6e4),"m ",Math.floor(X%6e4/1e3),"s"]})]})]})]}),j>0&&(0,a.jsxs)("div",{className:"bg-primary/20 backdrop-blur-lg rounded-xl p-4 border border-white/10 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Your Mining Equipment"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(u).map(([e,s])=>{if(s>0){let t=h.find(s=>s.name===e);return(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[a.jsx("p",{className:"font-bold",children:e}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-sm text-white/60",children:["Count: ",s,"/2"]}),(0,a.jsxs)("p",{className:"text-sm text-green-400",children:["+",t?(t.miningRatePerDay*s).toFixed(3):"0.000"," SOL/day"]})]})]},e)}return null})}),a.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-white/60",children:"Total Mining (30 days)"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:[(30*S).toFixed(2)," SOL"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Estimated Value"}),(0,a.jsxs)("p",{className:"font-bold text-green-400",children:["$",(4500*S).toFixed(2)," USD"]})]})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(e=>(0,a.jsxs)(n.E.div,{className:`bg-primary/20 backdrop-blur-lg rounded-xl p-4 border-2 ${A(e)?"border-accent/30 hover:border-accent":"border-white/10 opacity-70"}`,whileHover:{scale:1.02},onClick:()=>c(e),children:[a.jsx("div",{className:"relative h-48 mb-4",children:"RTX5090"===e.name?a.jsx("video",{src:e.image,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-contain"}):a.jsx(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-contain"})}),(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-bold",children:e.name}),a.jsx("p",{className:"text-accent",children:e.hashrate}),(0,a.jsxs)("p",{className:"text-xs text-white/60",children:["Duration: ",e.duration]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Owned"}),(0,a.jsxs)("p",{className:"font-bold",children:[u[e.name]||0,"/2"]})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm text-white/60",children:"Price:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[e.price.musky&&(0,a.jsxs)("span",{className:"text-xs bg-black/20 px-2 py-1 rounded",children:[e.price.musky.toLocaleString()," MUSKY"]}),(0,a.jsxs)("span",{className:"text-xs bg-black/20 px-2 py-1 rounded",children:[e.price.ton," TON"]}),(0,a.jsxs)("span",{className:"text-xs bg-black/20 px-2 py-1 rounded",children:[e.price.stars.toLocaleString()," Stars"]})]})]}),a.jsx(n.E.button,{className:`w-full py-2 rounded-lg font-bold ${A(e)?"bg-orange-500 hover:bg-orange-400":"bg-gray-500 cursor-not-allowed"}`,whileHover:A(e)?{scale:1.02}:{},whileTap:A(e)?{scale:.98}:{},onClick:s=>{s.stopPropagation(),A(e)&&W(e)},children:A(e)?"Purchase":"Locked"})]},e.id))}),t&&!b&&a.jsx(o,{gpu:t,onClose:()=>c(null),onPurchase:e=>W(e),canPurchase:A(t),owned:u[t.name]||0}),t&&b&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-primary/90 backdrop-blur-xl rounded-2xl w-full max-w-lg overflow-hidden",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold",children:["Purchase ",t.name]}),a.jsx("button",{onClick:I,className:"w-8 h-8 rounded-full bg-black/20 flex items-center justify-center text-white/80 hover:bg-black/40 transition-colors",children:"✕"})]}),a.jsx(d.Z,{amount:t.price[N.toLowerCase()]||t.price.ton,currency:N,itemType:t.name,onSuccess:B,onCancel:I})]})})})]})})}},9089:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(5344),i=t(3729),r=t(8862);let n=({amount:e,currency:s,itemType:t,onSuccess:n,onCancel:l})=>{let{user:c,mutate:d}=function(){let{data:e,error:s,mutate:t}=(0,r.ZP)("/api/user",async e=>{let s=await fetch(e);if(!s.ok)throw Error("Failed to fetch user");return s.json()});return{user:e,isLoading:!s&&!e,isError:s,mutate:t}}(),[o,x]=(0,i.useState)(!1),[m,h]=(0,i.useState)(!1),[u,p]=(0,i.useState)(null),j=async()=>{if(!c){p("User not found. Please refresh the page.");return}x(!0),p(null);try{if("TON"===s||"Stars"===s)p("Telegram Web App is not available");else if("MUSKY"===s){if(c.balance<e){p("Insufficient MUSKY balance");return}let s=await fetch("/api/payments/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:c.user_id,amount:e,currency:"MUSKY",item_type:t})});if(s.ok)await s.json(),h(!0),d(),setTimeout(()=>{n()},1500);else{let e=await s.json();p(e.error||"Failed to process payment")}}}catch(e){console.error("Payment error:",e),p("An unexpected error occurred")}finally{x(!1)}};(0,i.useEffect)(()=>{let e=setTimeout(()=>{j()},500);return()=>clearTimeout(e)},[]);let g=(()=>{let t={};return"TON"===s?(t.MUSKY=8e3*e,t.Stars=500*e):"Stars"===s?(t.MUSKY=16*e,t.TON=e/500):"MUSKY"===s&&(t.TON=e/8e3,t.Stars=e/16),t})();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Processing Payment"}),a.jsx("p",{className:"text-white/60",children:o?"Processing your payment...":m?"Payment successful!":u?"Payment failed":`Paying ${e} ${s} for ${t}`})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-white/60",children:"Amount:"}),(0,a.jsxs)("span",{className:"font-bold",children:[e," ",s]})]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-white/60",children:["MUSKY"!==s&&(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Equivalent MUSKY:"}),(0,a.jsxs)("span",{children:[g.MUSKY.toLocaleString()," MUSKY"]})]}),"TON"!==s&&(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Equivalent TON:"}),(0,a.jsxs)("span",{children:[g.TON.toFixed(4)," TON"]})]}),"Stars"!==s&&(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Equivalent Stars:"}),(0,a.jsxs)("span",{children:[g.Stars.toLocaleString()," Stars"]})]})]})]}),a.jsx("div",{className:"flex justify-center",children:o?(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-t-accent border-white/20 rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-white/60",children:"Processing payment..."})]}):m?(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("p",{className:"text-green-400",children:"Payment successful!"})]}):u?(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("p",{className:"text-red-400 mb-2",children:u}),a.jsx("button",{onClick:l,className:"px-4 py-2 bg-black/20 rounded-lg hover:bg-black/30 transition-colors",children:"Go Back"})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-t-accent border-white/20 rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-white/60",children:"Initializing payment..."})]})})]})}},3137:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>r,__esModule:()=>i,default:()=>n});let a=(0,t(6843).createProxy)(String.raw`/Users/sauravlamichhane/Downloads/Musky-master/src/app/mining/page.tsx`),{__esModule:i,$$typeof:r}=a,n=a.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[638,575,139,876],()=>t(8275));module.exports=a})();