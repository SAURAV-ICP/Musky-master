"use strict";(()=>{var e={};e.id=1187,e.ids=[1187],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},6883:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>D,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>y,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>b});var a={};t.r(a),t.d(a,{GET:()=>c});var s=t(5419),o=t(9108),i=t(9678),n=t(8070),u=t(6517);let d=process.env.TELEGRAM_BOT_TOKEN,l=d?d.split(":")[0]:"your_bot_username";async function c(e){try{let{searchParams:r}=new URL(e.url);if(r.get("key")!==process.env.CRON_SECRET_KEY)return n.Z.json({error:"Unauthorized"},{status:403});let{data:t,error:a}=await u.O.from("users").select("user_id, telegram_id, balance").not("telegram_id","is",null);if(a)return console.error("Error fetching users:",a),n.Z.json({error:"Failed to fetch users"},{status:500});let s=["\uD83D\uDE80 Don't forget to collect your daily MUSKY tokens! Keep earning and staking for maximum rewards!","\uD83D\uDCB0 Your MUSKY tokens are waiting for you! Claim your daily rewards and boost your earnings!","âœ¨ Stake your MUSKY tokens today and earn up to 40% APY! The longer you stake, the more you earn!","\uD83D\uDD25 Hot tip: Collect your MUSKY tokens daily to maintain your streak and earn bonus rewards!","\uD83D\uDC8E Diamond hands get the best rewards! Stake your MUSKY tokens for 180 days for maximum returns!"],o=s[Math.floor(Math.random()*s.length)],i={inline_keyboard:[[{text:"\uD83C\uDF81 Claim Daily Rewards",url:`https://t.me/${l}?start=daily`},{text:"\uD83D\uDCB0 Stake Tokens",url:`https://t.me/${l}?start=stake`}]]},c=0;for(let e of t)if(e.telegram_id)try{await fetch(`https://api.telegram.org/bot${d}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:e.telegram_id,text:o,parse_mode:"HTML",reply_markup:i})}),c++}catch(r){console.error(`Error sending message to user ${e.user_id}:`,r)}return await u.O.from("broadcasts").insert({admin_id:"system",message:o,type:"scheduled",sent_at:new Date().toISOString()}),n.Z.json({success:!0,message:`Scheduled broadcast sent to ${c} users`})}catch(e){return console.error("Scheduled broadcast error:",e),n.Z.json({error:"Failed to send scheduled broadcast"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/scheduled-broadcast/route",pathname:"/api/admin/scheduled-broadcast",filename:"route",bundlePath:"app/api/admin/scheduled-broadcast/route"},resolvedPagePath:"/Users/sauravlamichhane/Downloads/Musky-master/src/app/api/admin/scheduled-broadcast/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:y,headerHooks:g,staticGenerationBailout:b}=p,D="/api/admin/scheduled-broadcast/route";function f(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:h})}},6517:(e,r,t)=>{t.d(r,{O:()=>i});var a=t(7890);let s="https://pkaooixolhnhdyajwlgw.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrYW9vaXhvbGhuaGR5YWp3bGd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk5NDQzMDEsImV4cCI6MjA1NTUyMDMwMX0.ATOLcUZaP--eojDV0ugG0bujlOkzam0q7A6e9IIKnxY";if(!s||!o)throw Error("Missing Supabase credentials");let i=(0,a.eI)(s,o)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,4159],()=>t(6883));module.exports=a})();